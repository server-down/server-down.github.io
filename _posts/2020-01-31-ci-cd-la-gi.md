---
layout: post
title:  "CI/CD lÃ  gÃ¬?"
author: halab
categories: [ CI/CD ]
tags: [CI, CD]
image: https://www.docker.com/sites/default/files/d8/2018-11/CICD.jpg
featured: true
---
Dáº¡o gáº§n Ä‘Ã¢y (thá»±c ra cÅ©ng khÃ´ng gáº§n láº¯m, vÃ i nÄƒm rá»“i ğŸ˜†),
á»Ÿ Ä‘Ã¢u cÅ©ng Ä‘á»c/nghe Ä‘Æ°á»£c vá» CI/CD, váº­y rá»‘t cuá»™c nÃ³ lÃ  cÃ¡i gÃ¬ váº­y nhá»‰?

CÃ³ thá»ƒ nÃ³i CI/CD lÃ  Ä‘áº¡i diá»‡n cho 1 phÆ°Æ¡ng thá»©c phÃ¡t triá»ƒn pháº§n má»m hiá»‡n Ä‘áº¡i ngÃ y nay.
Ã tÆ°á»Ÿng lÃ  dá»±a trÃªn viá»‡c thá»±c thi cÃ¡c script 1 cÃ¡ch tá»± Ä‘á»™ng
 Ä‘á»ƒ háº¡n cháº¿ tá»‘i Ä‘a cÃ¡c sai xÃ³t xáº£y ra trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m.
 CI/CD yÃªu cáº§u ráº¥t Ã­t tháº­m chÃ­ khÃ´ng cÃ³ thao tÃ¡c cá»§a con ngÆ°á»i 
 tá»« lÃºc phÃ¡t triá»ƒn cho Ä‘áº¿n khi deploy(sure, con ngÆ°á»i lÃ  nguá»“n gá»‘c cá»§a má»i tá»™i lá»—i ğŸ¤£)
 
CI Ä‘áº¡i diá»‡n cho **C**ontinuous **I**ntegration, 
trong khi CD cÃ³ thá»ƒ lÃ  **C**ontinuous **D**elivery hoáº·c **C**ontinuous **D**eployment

## Continuous Integration
HÃ ng ngÃ y cÃ¡c developer trong team code tÃ­nh nÄƒng, fix bug sau Ä‘Ã³ commit vÃ  push lÃªn repo, merge vÃ o branch chÃ­nh...
Vá»›i cÃ¡c hÃ nh Ä‘á»™ng nÃ y ta cÃ³ thá»ƒ setting Ä‘á»ƒ cÃ³ thá»ƒ tá»± Ä‘á»™ng cháº¡y test, quÃ©t sonar, 
Ä‘áº£m báº£o ráº±ng code má»›i sáº½ khÃ´ng gÃ¢y ra lá»—i vá»›i app cá»§a mÃ¬nh. 
CÃ¡i khÃ¡i niá»‡m nÃ y chÃ­nh lÃ  continuous integration.

#### Cáº§n lÃ m gÃ¬ Ä‘á»ƒ cÃ³ continuous integration:
- Cáº§n pháº£i viáº¿t code test cho má»i tÃ­nh nÄƒng. Theo mÃ¬nh Ä‘Ã¢y lÃ  trá»Ÿ ngáº¡i lá»›n nháº¥t bá»Ÿi Ä‘a sá»‘ dev ráº¥t ngáº¡i viáº¿t code test
- Cáº§n pháº£i cÃ³ 1 con server (nhiá»u khi lÃ  ráº¥t máº¡nh) Ä‘á»ƒ cháº¡y cÃ¡c job cá»§a CI: build, test, sonar ...

#### Lá»£i Ã­ch thu Ä‘Æ°á»£c:
- Äá»ƒ lá»t Ã­t bug hÆ¡n khi lÃªn production (táº¥t nhiÃªn, cÃ³ test mÃ )
- CÃ¡c bug, issue Ä‘Æ°á»£c phÃ¡t hiá»‡n sá»›m trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn
- Giáº£m thiá»ƒu context switching, developer cÃ³ thá»ƒ fix bug ngay thay vÃ¬ Ä‘i lÃ m task khÃ¡c rá»“i láº¡i pháº£i quay láº¡i fix bug khi team QA bÃ¡o bug
- Giáº£m effort cá»§a QA team, tÄƒng cáº£ performance ná»¯a (mÃ¡y cháº¡y test thÃ¬ cháº¯c cháº¯n chÃ­nh xÃ¡c vÃ  nhanh hÆ¡n ngÆ°á»i rá»“i)



## Continuous Delivery
LÃ  bÆ°á»›c tiáº¿p theo sau continuous integration.
Khi Ä‘Ã£ cháº¯c cháº¯n ráº±ng code cá»§a mÃ¬nh khÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬ ta cÃ³ thá»ƒ deploy nÃ³ lÃªn server 
báº±ng cÃ¡ch báº¥m 1 cÃ¡i button trÃªn mÃ n hÃ¬nh, sau Ä‘Ã³ thÃ¬ cÃ³ thá»ƒ pha trÃ , coffee rá»“i Ä‘á»£i nÃ³ lÃªn thÃ´i.
MÃ¬nh Ä‘Ã£ lÃ m nhiá»u kiá»ƒu deploy rá»“i, tá»« kÃ©o file lÃªn server, ssh lÃªn server tá»± pull code vá» build hay cháº¡y script build báº±ng tay (vÃ¢ng, báº±ng tay nÃªn váº«n cÃ³ kháº£ nÄƒng sai nhÃ©)
thÃ¬ cÃ¡i viá»…n cáº£nh trÃªn tháº­t lÃ  tÆ°Æ¡i Ä‘áº¹p ğŸ˜ğŸ¥°ğŸ˜˜

#### Tháº¿ thÃ¬ chÃºng ta cáº§n:
- Pháº§n CI pháº£i lÃ m tá»‘t, cÃ¡c test case pháº£i cover Ä‘Æ°á»£c Ä‘á»§ nhiá»u
- Pháº§n deploy pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n tá»± Ä‘á»™ng (cho dÃ¹ trÆ°á»›c Ä‘Ã³ báº¥m button báº±ng tay)

#### Äá»•i láº¡i:
- KhÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n quÃ¡ trÃ¬nh deploy ná»¯a, 
sáº½ khÃ´ng cáº§n chuáº©n bá»‹ ká»¹ cÃ ng má»—i Ä‘á»£t release (khÃ´ng release note, deploy step gÃ¬ ná»¯a háº¿t)



## Continuous Deployment
Náº¿u nhÆ° á»Ÿ continuous delivery báº¡n váº«n cáº§n pháº£i báº¥m button thÃ¬ code má»›i Ä‘Æ°á»£c deploy lÃªn server
thÃ¬ continuous deployment cÃ²n Ä‘i xa hÆ¡n tháº¿, táº¥t cáº£ Ä‘á»u tá»± Ä‘á»™ng. 
Sau khi pass cÃ¡c test case thÃ¬ nÃ³ tá»± Ä‘á»™ng deploy luÃ´n, khÃ´ng cáº§n con ngÆ°á»i tham gia tÃ½ nÃ o luÃ´n.

#### Táº¥t nhiÃªn, yÃªu cáº§u cÅ©ng cao hÆ¡n:
- Code test pháº£i "hoÃ n háº£o", táº¥t nhiÃªn rá»“i, khÃ´ng cÃ³ con ngÆ°á»i tham gia mÃ 
- Viá»‡c cáº­p nháº­t document pháº£i báº¯t ká»‹p tá»‘c Ä‘á»™ release
- Cáº§n cÃ³ feature flag, Ä‘á»ƒ enable/disable tÃ­nh nÄƒng sao cho khá»›p vá»›i káº¿ hoáº¡ch kinh doanh, marketing

#### VÃ  lá»£i Ã­ch thu Ä‘Æ°á»£c cÅ©ng ráº¥t lá»›n:
- Tá»‘c Ä‘á»™ phÃ¡t triá»ƒn sáº½ nhanh hÆ¡n, khÃ´ng cáº§n chuáº©n bá»‹ nhiá»u cho cÃ¡c Ä‘á»£t release ná»¯a
- Rá»§i ro má»—i láº§n deploy cÅ©ng nhá» hÆ¡n, do chá»‰ deploy 1 tÃ­nh nÄƒng má»—i láº§n
- KhÃ¡ch hÃ ng sáº½ hÃ i lÃ²ng hÆ¡n do nhÃ¬n tháº¥y thay Ä‘á»•i trÃªn há»‡ thá»‘ng má»—i ngÃ y, thay vÃ¬ hÃ ng tuáº§n, hÃ ng thÃ¡ng nhÆ° trÆ°á»›c.

## CI/CD flow
TÃ³m láº¡i thÃ¬ cáº£ flow CI/CD cÃ³ thá»ƒ biá»ƒu diá»…n báº±ng cÃ¡i hÃ¬nh sau:
![CI/CD](https://wac-cdn.atlassian.com/dam/jcr:b2a6d1a7-1a60-4c77-aa30-f3eb675d6ad6/ci%20cd%20asset%20updates%20.007.png?cdnVersion=788)



## CI/CD Tools
Nghe nÃ³i nÃ£y giá» hay qÃºa, tháº¿ muá»‘n lÃ m CI/CD thÃ¬ nhÆ° nÃ o? 

CÃ³ ráº¥t nhiá»u tool Ä‘á»ƒ lÃ m CI/CD, Ä‘Ã¢y lÃ  1 sá»‘ cÃ¡i tÃªn mÃ¬nh biáº¿t nhÃ©:
- [Jenkins](https://jenkins.io/)
- [Gitlab CI](https://docs.gitlab.com/ee/ci/README.html) (chá»‰ support Gitlab, táº¥t nhiÃªn)
- [Github Actions](https://github.com/features/actions) (má»›i ra luÃ´n, táº¥t nhiÃªn lÃ  Github only)
- [Bitbucket Pipelines](https://bitbucket.org/product/features/pipelines) (Bitbucket only)
- [Circle CI](https://circleci.com/) (Github, Bitbucket)
- [Travis CI](https://travis-ci.com)(Github only)
- [Team City](https://www.jetbrains.com/teamcity/) (hÃ ng Jet Brains nhÆ°ng mÃ  free)

**References:**
- [Atlassian CI/CD: Continuous integration vs. continuous delivery vs. continuous deployment](https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment)
- [GitLab CI/CD: Introduction to CI/CD methodologies](https://docs.gitlab.com/ee/ci/introduction/#introduction-to-cicd-methodologies)
